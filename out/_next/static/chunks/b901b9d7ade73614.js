(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6085,e=>{"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let r=t.fetch,a=t.fetch.bind(t),s=t.Headers,o=t.Request,n=t.Response;e.s(["Headers",0,s,"Request",0,o,"Response",0,n,"default",0,a,"fetch",0,r])},48124,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(65464);function s(e){return e.is_coupon&&e.expires_at&&new Date(e.expires_at)<new Date}function o(){let[e,o]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[l,d]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=!0;return(async()=>{let{data:t,error:r}=await a.supabase.from("posts").select("*").order("created_at",{ascending:!1}).limit(200);e&&(r||o(t||[]),i(!1))})(),()=>{e=!1}},[]);let c=(0,r.useMemo)(()=>{let t=new Set,r=!1,a=!1;for(let o of e)(o.tags||[]).forEach(e=>t.add(e)),o.is_coupon&&(s(o)?a=!0:r=!0);return r&&t.add("Coupon"),a&&t.add("Coupon (Expired)"),Array.from(t).sort((e,t)=>e.localeCompare(t))},[e]),p=(0,r.useMemo)(()=>{if(!l)return e;let t=l.toLowerCase();return"coupon"===t?e.filter(e=>e.is_coupon&&!s(e)):"coupon (expired)"===t?e.filter(e=>e.is_coupon&&s(e)):e.filter(e=>(e.tags||[]).some(e=>e.toLowerCase()===t))},[e,l]),{activeCoupons:x,nonCoupons:u,expiredCoupons:m}=(0,r.useMemo)(()=>(function(e){let t=new Date,r=[],a=[],s=[];for(let o of e)o.is_coupon?o.expires_at&&new Date(o.expires_at)<t?s.push(o):r.push(o):a.push(o);return r.sort((e,t)=>(e.expires_at?new Date(e.expires_at).getTime():Number.MAX_SAFE_INTEGER)-(t.expires_at?new Date(t.expires_at).getTime():Number.MAX_SAFE_INTEGER)||new Date(t.created_at)-new Date(e.created_at)),a.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),s.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),{activeCoupons:r,nonCoupons:a,expiredCoupons:s}})(p),[p]),g=[...x,...u,...m];return(0,t.jsxs)("main",{className:"max-w-3xl mx-auto px-4 py-10",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-primary mb-2",children:"News & Updates"}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-200 mb-6",children:"Latest announcements, events, and occasional promotions."}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-8",children:[(0,t.jsx)("button",{onClick:()=>d(""),className:`text-sm px-3 py-1 rounded-full border ${!l?"bg-primary text-white border-primary":"bg-transparent text-primary border-primary"}`,children:"All"}),c.map(e=>(0,t.jsx)("button",{onClick:()=>d(e),className:`text-sm px-3 py-1 rounded-full border ${l===e?"bg-primary text-white border-primary":"bg-transparent text-primary border-primary"}`,children:e},e))]}),n?(0,t.jsx)("p",{children:"Loading…"}):(0,t.jsxs)("ul",{className:"space-y-6",children:[g.map(e=>{let r,a=s(e),o=(r=(e.tags||[]).slice(),!e.is_coupon||s(e)||r.some(e=>"coupon"===e.toLowerCase())||r.push("Coupon"),s(e)&&!r.some(e=>"coupon (expired)"===e.toLowerCase())&&r.push("Coupon (Expired)"),r),n=a?"border-gray-300 bg-gray-50 dark:bg-gray-800/40 opacity-80 grayscale":"border-white/10 bg-white dark:bg-gray-900";return(0,t.jsxs)("li",{className:`relative rounded-xl border shadow p-5 transition ${n}`,children:[a&&(0,t.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,t.jsx)("div",{className:"rotate-12 rounded bg-gray-200 text-gray-700 text-[10px] font-semibold px-2 py-1 shadow",children:"EXPIRED"})}),(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e.title}),!!o.length&&(0,t.jsx)("div",{className:"mt-1 flex flex-wrap gap-2",children:o.map(e=>(0,t.jsx)("button",{onClick:()=>d(e),className:"text-xs px-2 py-0.5 rounded bg-gray-200 dark:bg-gray-800",children:e},e))})]}),e.is_coupon&&(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded ${a?"bg-gray-300 text-gray-700":"bg-green-200 text-green-900"}`,children:a?"Coupon (Expired)":"Coupon"})]}),e.image_url&&(0,t.jsx)("div",{className:`mt-3 ${a?"opacity-80":""}`,children:(0,t.jsx)("img",{src:e.image_url,alt:e.title,className:"rounded-lg w-full h-auto"})}),e.body&&(0,t.jsx)("p",{className:`mt-3 whitespace-pre-line ${a?"text-gray-500 dark:text-gray-300":"text-gray-700 dark:text-gray-200"}`,children:e.body}),(0,t.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["Posted ",new Date(e.created_at).toLocaleString(),e.is_coupon&&e.expires_at&&(0,t.jsxs)(t.Fragment,{children:[" • Expires ",new Date(e.expires_at).toLocaleString()]})]})]},e.id)}),!g.length&&(0,t.jsx)("p",{children:"No posts found."})]})]})}e.s(["default",()=>o])},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);